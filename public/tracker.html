<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Controle de Jornada</title>
  <script type"text/javascript">window.$ = window.jQuery = require('./jquery.min.js');</script>
  <script type"text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.12.4/js/standalone/selectize.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.12.4/css/selectize.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.12.4/css/selectize.bootstrap3.css">
  <script type"text/javascript" src="vue.js"></script>
  <script type"text/javascript" src="https://unpkg.com/moment"></script>
  <script type"text/javascript" src="bundle.js"></script>
</head>

<body id="tracker">
  <div class="arrow-up"></div>
  <div class="tracker-body">
    <nav class="navbar bg-blue">
      <div class="container-fluid">
        <div class="navbar-header">
          <div class="row">
            <div class="navbar-brand col-xs-12 text-center">Tracker</div>
          </div>
        </div>
      </div>
    </nav>
    <div class="container">
      <div class="row">
        <div class="col-xs-12">
          <div class="form-group">
            <label for="taskName">Activity</label>
            <input type="hidden" name="taskKey"/>
            <div class="input-group">
              <input type="email" class="" id="taskName" placeholder="Activity"/>
              <span class="input-group-btn">
                <button name="toggle" type="button" class="btn btn-default">V</button>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="container">
      <ul class="list-group">
        <li class="list-group-item">Cras justo odio</li>
      </ul>
    </div>
  </div>
  <script>
    $(function() {
      $('#taskName').selectize({
        maxItems: 1,
        valueField: 'key',
        labelField: 'key',
        searchField: 'summary',
        create: false,
        render: {
          option: function(item, escape) {
            console.log(item)
            return '<div>' +
                '<span class="title">' +
                    escape(item.key) +
                '</span> - ' +
                '<span class="description">' + escape(item.summary) + '</span>' +
            '</div>';
          }
        },
        load: function(query, callback) {
            if (!query.length) return callback();
            $.ajax({
                url: 'http://localhost:5000/search-task?q=' + encodeURIComponent(query),
                type: 'GET',
                error: function() {
                    callback();
                },
                success: function(res) {
                  console.log(res)
                  callback(res);
                }
            });
        }
      });
    })
  </script>
</body>
</html>
